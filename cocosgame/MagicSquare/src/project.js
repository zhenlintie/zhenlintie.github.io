require=function t(e,o,c){function i(s,r){if(!o[s]){if(!e[s]){var a="function"==typeof require&&require;if(!r&&a)return a(s,!0);if(n)return n(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var u=o[s]={exports:{}};e[s][0].call(u.exports,function(t){var o=e[s][1][t];return i(o?o:t)},u,u.exports,t,e,o,c)}return o[s].exports}for(var n="function"==typeof require&&require,s=0;s<c.length;s++)i(c[s]);return i}({GameOver:[function(t,e,o){"use strict";cc._RFpush(e,"2a9a1e5CSpGe5eouWy6hPG7","GameOver"),cc.Class({"extends":cc.Component,properties:{newHighLabel:cc.Label,scoreLabel:cc.Label,historyLabel:cc.Label},onLoad:function(){this.node.active=!1,this.node.on(cc.Node.EventType.TOUCH_START,this.onTouch,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouch,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouch,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouch,this),this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onTouch,this),this.node.on(cc.Node.EventType.MOUSE_MOVE,this.onTouch,this)},onTouch:function(t){t.stopPropagation()},onRestart:function(){this.node.dispatchEvent(new cc.Event.EventCustom("startGame",(!0))),this.node.active=!1},gameOver:function(t){this.node.active=!0,this.scoreLabel.string="得分："+t;var e=cc.sys.localStorage.historyHighScore;e||(e=0),t>e?(this.historyLabel.string="历史最高："+t,this.newHighLabel.node.opacity=255,cc.sys.localStorage.historyHighScore=t):(this.historyLabel.string="历史最高："+e,this.newHighLabel.node.opacity=0)}}),cc._RFpop()},{}],GameStart:[function(t,e,o){"use strict";cc._RFpush(e,"bb49buqyMJNSpdr8ebUviV1","GameStart"),cc.Class({"extends":cc.Component,properties:{helpTip:cc.Label,icon:cc.Sprite,startButton:cc.Button},onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouch,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouch,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouch,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouch,this),this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onTouch,this),this.node.on(cc.Node.EventType.MOUSE_MOVE,this.onTouch,this),this.showHelp=!1,this.helpTip.node.opacity=0},onTouch:function(t){t.stopPropagation()},onStart:function(){this.node.dispatchEvent(new cc.Event.EventCustom("startGame",(!0)))},onClickHelp:function(){this.showHelp?(this.showHelp=!1,this.helpTip.node.opacity=0,this.icon.node.opacity=255,this.startButton.node.opacity=255):(this.showHelp=!0,this.helpTip.node.opacity=255,this.icon.node.opacity=0,this.startButton.node.opacity=0)}}),cc._RFpop()},{}],HelloWorld:[function(t,e,o){"use strict";cc._RFpush(e,"280c3rsZJJKnZ9RqbALVwtK","HelloWorld"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){},update:function(t){}}),cc._RFpop()},{}],LevelLoader2:[function(t,e,o){"use strict";cc._RFpush(e,"99f7cXTBq9K0p3n8KwJX1ie","LevelLoader2"),cc._RFpop()},{}],Level:[function(t,e,o){"use strict";cc._RFpush(e,"3bc9cFJLoxNfq1CIFdkSYU5","Level");var c={loadLevels:function(){}};e.exports=c,cc._RFpop()},{}],Preload:[function(t,e,o){"use strict";cc._RFpush(e,"d4356tPBmNN15oeiArElDzG","Preload"),cc.Class({"extends":cc.Component,properties:{spriteFrames:[cc.SpriteFrame],fonts:[cc.Font]},onLoad:function(){}}),cc._RFpop()},{}],TargetManager:[function(t,e,o){"use strict";cc._RFpush(e,"36894x+fLxJb5zJ1bQgLp7K","TargetManager"),cc.Class({"extends":cc.Component,properties:{targetPrefab:cc.Prefab},onLoad:function(){this.targetPool=new cc.NodePool;for(var t=0;t<5;++t)this.targetPool.put(cc.instantiate(this.targetPrefab))},newRandomTarget:function(t){var e=this._getTarget();e.zIndex=1,t.addChild(e);var o="rect"+((10*cc.random0To1()|0)%3+1);return e.getComponent("target").init(o),e},putTarget:function(t){this.targetPool.put(t)},_getTarget:function(){var t=null;return t=this.targetPool.size()>0?this.targetPool.get():cc.instantiate(this.targetPrefab)}}),cc._RFpop()},{}],TargetTipSquare:[function(t,e,o){"use strict";cc._RFpush(e,"8b5ddpXNl1FF5aOo502N6sO","TargetTipSquare"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){},init:function(t){this.name=t;var e=this;cc.loader.loadRes("squares/"+t,cc.SpriteFrame,function(t,o){e.getComponent(cc.Sprite).spriteFrame=o})}}),cc._RFpop()},{}],game:[function(t,e,o){"use strict";cc._RFpush(e,"add04cXk1tJybD4sCCxbnpf","game");var c=cc.Enum({Idle:-1,Start:-1});cc.Class({"extends":cc.Component,properties:{mainNode:cc.Node,leftTarget:cc.Node,rightTarget:cc.Node,leftButton:cc.Node,rightButton:cc.Node,scoreLabel:cc.Label,startPage:cc.Node,gameOverPage:cc.Node},onLoad:function(){this.startPage.zIndex=3,this.gameOverPage.zIndex=3,this.leftButton.zIndex=2,this.rightButton.zIndex=2,this.targetMgr=this.node.getChildByName("TargetManager").getComponent("TargetManager"),this.targetStack=new Array,this.scorePointBottom=-this.mainNode.height/2,this.scorePointTop=-this.mainNode.height/2+120+50,this.currentScore=0,this.scoreLabel.string=this.currentScore,this.state=c.Idle,this.gameOverPage.active=!1,this.mainNode.on("startGame",function(t){t.stopPropagation(),this.startPage.active&&(this.startPage.active=!1),this.state==c.Idle&&(this.resetTargets(),this.currentScore=0,this.scoreLabel.string=this.currentScore,this.startProduce(),this.state=c.Start)},this),this.leftButton.on(cc.Node.EventType.TOUCH_START,this.onLeftButtonClicked,this),this.rightButton.on(cc.Node.EventType.TOUCH_START,this.onRightButtonClicked,this)},startProduce:function(){this.leftTarget.getComponent("TargetTipSquare").init("rect2"),this.rightTarget.getComponent("TargetTipSquare").init("rect1"),this.leftName="rect2",this.rightName="rect1",this.produceTarget(),this.schedule(this.produceTarget,.75)},stopProduce:function(){this.unschedule(this.produceTarget)},gameOver:function(){if(this.state==c.Start){this.gameOverPage.getComponent("GameOver").gameOver(this.currentScore),this.stopProduce();for(var t=0;t<this.targetStack.length;++t)this.targetStack[t].stopAllActions();this.state=c.Idle,this.mainNodeShake()}},mainNodeShake:function(){var t=cc.moveBy(.05,-20,0),e=cc.moveBy(.08,40,0),o=cc.moveBy(.08,-30,0),c=cc.moveBy(.05,10,0);this.gameOverPage.runAction(cc.sequence(t,e,o,c))},getAGoal:function(t,e){var o=this;this.targetStack.shift(),t.stopAllActions();var c=cc.spawn(cc.fadeOut(.15),cc.moveBy(.15,e?-375:375,0));t.runAction(cc.sequence(c,cc.callFunc(function(){o.targetMgr.putTarget(t)}))),this.currentScore+=1,this.scoreLabel.string=""+this.currentScore},resetTargets:function(){for(var t=0;t<this.targetStack.length;++t)this.targetMgr.putTarget(this.targetStack[t]);this.targetStack.splice(0,this.targetStack.length)},produceTarget:function(){var t=this.targetMgr.newRandomTarget(this.mainNode);t.setPosition(0,this.mainNode.height/2-80);t.opacity=0,t.runAction(cc.spawn(cc.fadeIn(.8),cc.moveBy(2,0,-1400))),this.targetStack.push(t)},onLeftButtonClicked:function(t){cc.log("on touch"),this.check(!0)},onRightButtonClicked:function(t){this.check(!1)},check:function(t){if(this.targetStack.length>0){var e=this.targetStack[0];if(cc.log(e.y+"("+this.scorePointBottom+","+this.scorePointTop+")"),e.y>=this.scorePointBottom&&e.y<=this.scorePointTop){var o=e.getComponent("target").name,c=t?this.leftName:this.rightName;o==c?this.getAGoal(e,t):this.gameOver()}}},update:function(t){if(this.targetStack.length>0){var e=this.targetStack[0];if(e.y<this.scorePointBottom){var o=e.getComponent("target").name;o==this.leftName||o==this.rightName?this.gameOver():(e.stopAllActions(),this.targetMgr.putTarget(e),this.targetStack.shift())}}}}),cc._RFpop()},{}],target:[function(t,e,o){"use strict";cc._RFpush(e,"32414mhwW5FhZKCsuCrdmxI","target"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){},init:function(t){this.name=t;var e=this;cc.loader.loadRes("squares/"+t,cc.SpriteFrame,function(t,o){e.getComponent(cc.Sprite).spriteFrame=o})}}),cc._RFpop()},{}]},{},["GameOver","GameStart","HelloWorld","Level","LevelLoader2","Preload","TargetManager","TargetTipSquare","game","target"]);
require=function e(t,o,n){function c(i,l){if(!o[i]){if(!t[i]){var a="function"==typeof require&&require;if(!l&&a)return a(i,!0);if(s)return s(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var r=o[i]={exports:{}};t[i][0].call(r.exports,function(e){var o=t[i][1][e];return c(o?o:e)},r,r.exports,e,t,o,n)}return o[i].exports}for(var s="function"==typeof require&&require,i=0;i<n.length;i++)c(n[i]);return c}({bullet:[function(e,t,o){"use strict";cc._RFpush(t,"9b2b98ozPdBOrh4fCj6saZd","bullet"),cc.Class({"extends":cc.Component,name:"bullet",properties:{pool:{"default":null,type:cc.NodePool,visible:!1},boomPrefab:cc.Prefab},onLoad:function(){this.boomPool=D.common.genNodePool(this.boomPrefab,10)},onCollisionEnter:function(e,t){var o=D.common.genNewNode(this.boomPool,this.boomPrefab,this.node.parent);o.setPosition(t.node.getPosition()),console.log("pool:"+t.boomPool),t.node.active=!1,t.node.runAction(cc.hide())},update:function(e){}}),cc._RFpop()},{}],common:[function(e,t,o){"use strict";cc._RFpush(t,"89b90QwKqVG0LcICLL05Raj","common");cc.Class({"extends":cc.Component,properties:{},onLoad:function(){D.common=this},genNodePool:function(e,t){for(var o=t,n=new cc.NodePool,c=0;c<o;++c){var s=cc.instantiate(e);n.put(s)}return n},genNewNode:function(e,t,o){var n=null;return n=e.size()>0?e.get():cc.instantiate(t),o.addChild(n),n}});cc._RFpop()},{}],game:[function(e,t,o){"use strict";cc._RFpush(t,"4db6aDnPvlI17ZNagLjK8GX","game"),cc.Class({"extends":cc.Component,properties:{sceneNode:cc.Node,mosquitoPrefab:cc.Prefab},onLoad:function(){var e=cc.director.getCollisionManager();e.enabled=!0,this.mosquitoPool=D.common.genNodePool(this.mosquitoPrefab,5),this.startSpawnMosquitoes(),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},onKeyDown:function(e){switch(e.keyCode){case cc.KEY.s:}},onKeyUp:function(e){switch(e.keyCode){case cc.KEY.s:}},spawnMosquito:function(){var e=D.common.genNewNode(this.mosquitoPool,this.mosquitoPrefab,this.sceneNode);e.getComponent("mosquito").game=this;var t=400*cc.randomMinus1To1();e.setPosition(cc.p(t,350));var o=20*cc.randomMinus1To1(),n=30*cc.randomMinus1To1()+70;e.runAction(cc.moveTo(700/n,o,-500))},startSpawnMosquitoes:function(){var e=1.5;this.schedule(function(){this.spawnMosquito()},e)},destroyMosquito:function(e){this.mosquitoPool.put(e)}}),cc._RFpop()},{}],global:[function(e,t,o){"use strict";cc._RFpush(t,"497acL4sGRFWryvpBNtA0Fj","global"),window.D={common:null},cc._RFpop()},{}],mosquito:[function(e,t,o){"use strict";cc._RFpush(t,"ec6c3LOaEhMbqR2lYeiuVCm","mosquito"),cc.Class({"extends":cc.Component,name:"mosquito",properties:{game:{"default":null,type:cc.Component,visible:!1}},onLoad:function(){},onCollisionEnter:function(e,t){this.game.destroyMosquito(t.node)},needDestroy:function(e){}}),cc._RFpop()},{}],weapon:[function(e,t,o){"use strict";cc._RFpush(t,"c1ab8+YX3VNRJXQJ+eYWEaf","weapon"),cc.Class({"extends":cc.Component,properties:{head:cc.Node,bulletSpeed:200,speedDelta:.1,minAngle:-80,maxAngle:80,minBulletInterval:.5,bulletPrefab:cc.Prefab},onLoad:function(){this.speed=0,this.lastValidKey=cc.KEY.none,this.bulletPool=D.common.genNodePool(this.bulletPrefab,10),this.lastBulletTimeInterval=this.minBulletInterval+1,cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},onKeyDown:function(e){switch(e.keyCode){case cc.KEY.space:this.shot();break;case cc.KEY.a:case cc.KEY.left:this.speed=-this.speedDelta,this.lastValidKey=e.keyCode;break;case cc.KEY.d:case cc.KEY.right:this.speed=this.speedDelta,this.lastValidKey=e.keyCode}},onKeyUp:function(e){switch(e.keyCode){case cc.KEY.a:case cc.KEY.left:case cc.KEY.d:case cc.KEY.right:if(this.lastValidKey!==e.keyCode)return;this.speed=0,this.lastValidKey=cc.KEY.none}},shot:function(){if(console.log(this.lastBulletTimeInterval+"-"+this.minBulletInterval),this.lastBulletTimeInterval>this.minBulletInterval){this.lastBulletTimeInterval=0;var e=this.node.convertToWorldSpaceAR(this.head.getPosition()),t=this.node.parent.convertToNodeSpaceAR(e),o=D.common.genNewNode(this.bulletPool,this.bulletPrefab,this.node.parent);o.active=!0,o.runAction(cc.show()),o.setPosition(t),o.getComponent("bullet").pool=this.bulletPool;var n=520,c=700,s=Math.sqrt(n*n+c*c),i=cc.pSub(t,this.node.getPosition()),l=s/cc.pLength(i),a=cc.pMult(i,l),u=this;o.runAction(cc.sequence(cc.moveBy(1.5,a),cc.callFunc(function(){u.bulletPool.put(o)})));var r=cc.pNormalize(i),h=cc.moveBy(.1,cc.pMult(r,-10)),m=cc.moveBy(.15,cc.pMult(r,10));this.node.runAction(cc.sequence(h,m))}},update:function(e){this.lastBulletTimeInterval+=e,this.lastBulletTimeInterval>this.minBulletInterval&&(this.lastBulletTimeInterval=this.minBulletInterval+.1);var t=this.node,o=t.rotation;t.rotation=Math.min(this.maxAngle,Math.max(this.minAngle,this.speed+o))}}),cc._RFpop()},{}]},{},["bullet","common","game","global","mosquito","weapon"]);